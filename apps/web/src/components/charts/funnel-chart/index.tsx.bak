import React from "react";

const FunnelChart = () => {
  const data = [
    { percentage: 100, label: "100%" },
    { percentage: 66, label: "66%" },
    { percentage: 55, label: "55%" },
    { percentage: 24, label: "24%" },
    { percentage: 14, label: "14%" },
  ];

  const width = 800;
  const height = 200;
  const funnelWidth = 120; // Width of each section
  const totalSections = data.length;

  return (
    <svg width={width} height={height}>
      {data.map((d, i) => {
        const nextIndex = i + 1 < data.length ? i + 1 : i;
        const nextData = data[nextIndex];
        const xStart = i * funnelWidth;
        const xEnd = (i + 1) * funnelWidth;

        const yStartTop = (height * (1 - d.percentage / 100)) / 2;
        const yEndTop = (height * (1 - nextData.percentage / 100)) / 2;
        const yStartBottom = (height * (1 + d.percentage / 100)) / 2;
        const yEndBottom = (height * (1 + nextData.percentage / 100)) / 2;

        const controlPointOffset = 0; // Control point offset for Bezier curves

        return (
          <path
            key={i}
            d={`
              M ${xStart},${yStartTop}
              C ${xStart},${yStartTop} ${xEnd - controlPointOffset},${yEndTop} ${xEnd},${yEndTop}
              L ${xEnd},${yEndBottom}
              C ${xEnd - controlPointOffset},${yEndBottom} ${xStart},${yStartBottom} ${xStart},${yStartBottom}
              Z
            `}
            fill={`rgba(232, 119, 35, ${(totalSections - i) / totalSections})`}
          />
        );
      })}
      {data.map((d, i) => (
        <text
          key={i}
          x={i * funnelWidth + funnelWidth - 40}
          y={height / 2} // Adjust this value to position the text vertically
          fontSize="16"
          textAnchor="middle"
          alignmentBaseline="middle"
        >
          {d.label}
        </text>
      ))}
    </svg>
  );
};

export default FunnelChart;
